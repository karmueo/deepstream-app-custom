application:
  enable-perf-measurement: 1
  perf-measurement-interval-sec: 5
  ##gie-kitti-output-dir=streamscl
  #enable-jpeg-save: 1
  smart-rec-detect-default: 0

source:
  # csv-file-path: sources.csv
  csv-file-path: file_sources.csv

pre-process:
  enable: 1
  # NOTE: 根据模型640x640/640x352调整
  config-file: ../config_preprocess_rgb_352_primary.txt
  # config-file: ../config_preprocess_rgb_primary.txt

primary-gie:
  enable: 1
  gpu-id: 0
  gie-unique-id: 1
  #(0): nvinfer - Default inference plugin based on Tensorrt
  #(1): nvinferserver - inference plugin based on Tensorrt-Inference-Server
  plugin-type: 0
  nvbuf-memory-type: 0
  input-tensor-meta: 1
  # input-tensor-meta=1
  # NOTE: 根据模型640x640/640x352调整
  config-file: config_infer_primary_yolo_352_rgb.yml
  # config-file: config_infer_primary_yolo_640_rgb.yml

# 自定义的单目标跟踪
tracker:
  enable: 1
  # For NvDCF and NvDeepSORT tracker, tracker-width and tracker-height must be a multiple of 32, respectively
  tracker-width: 1920
  tracker-height: 1080
  ll-lib-file: /opt/nvidia/deepstream/deepstream/lib/libsot.so
  ll-config-file: /opt/nvidia/deepstream/deepstream/sot_plugin/config/config_sot.yml
  gpu-id: 0
  display-tracking-id: 1
  # TODO: 未测试。静止目标误检过滤开关（仅在 tracker 启用时生效）
  static-target-filter: 0
  # 连续帧数达到该值且目标稳定，则认为是静止误检目标
  static-target-filter-frames: 30
  # 目标中心点最大允许偏移（像素）
  static-target-filter-center-threshold: 5.0
  # 目标框尺寸变化阈值（比例，例如 0.05 表示 5%）
  static-target-filter-size-threshold: 0.05

videorecognition:
  enable: 1
  unique-id: 15
  gpu-id: 0
  nvbuf-memory-type: 0
  processing-width: 64
  processing-height: 64
  model-clip-length: 32
  sampling-rate: 5
  trt-engine-file: /opt/nvidia/deepstream/deepstream/deepstream-app-custom/gst-videorecognition/models/x3d_v8_4cls_fp16.engine
  labels-file: /opt/nvidia/deepstream/deepstream/deepstream-app-custom/configs/cls_labels.txt

# FAKE SINK 输出
sink0:
  enable: 0
  type: 1
  sync: 0

# 文件输出
sink3:
  enable: 1
  type: 3
  sync: 0
  container : 2  # 1=mp4, 2=mkv
  codec : 1      # 1=h264, 2=h265
  bitrate: 4000000
  output-file: ./output.mkv

# 自定义的udp组播
sink2:
  enable: 0
  #Type - 1=FakeSink 2=EglSink 3=File 4=UDPSink 5=nvdrmvideosink 6=MsgConvBroker 7=MyNetwork
  type: 7
  ip: 230.1.8.31
  multicast-port: 8128
  # NOTE: 通过ip a 查看网卡，指定组播网卡名称，例如: eth0, enp5s0, ens33 等
  # multicast-iface: eno1
  # multicast-ttl=32
  fps: 2  # 可选参数，不配置时默认为25

osd:
  enable: 1
  gpu-id: 0
  border-width: 2
  text-size: 15
  #value changed
  text-color: 1;1;1;1
  text-bg-color: 0.3;0.3;0.3;1
  font: Serif
  show-clock: 1
  clock-x-offset: 1700
  clock-y-offset: 15
  clock-text-size: 12
  clock-color: 1;1;0;1
  nvbuf-memory-type: 0

streammux:
  gpu-id: 0
  ##Boolean property to inform muxer that sources are live
  live-source: 0
  buffer-pool-size: 4
  batch-size: 1
  ##time out in usec, to wait after the first buffer is available
  ##to push the batch even if the complete batch is not formed
  batched-push-timeout: 40000
  ## Set muxer output width and height
  width: 1920
  height: 1080
  ##Enable to maintain aspect ratio wrt source, and allow black borders, works
  ##along with width, height properties
  enable-padding: 0
  nvbuf-memory-type: 0

tests:
  file-loop: 1
